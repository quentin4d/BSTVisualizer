<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <link rel="stylesheet">
    </head>
    <body onload="createTree()">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <input type="text" id="userInput">
        <input type="button" id="inputButton" value="input" onclick="insertNode()">
        
    <script>
        function BSTNode(key) {
            //<canvas id="canv" width="1000" height="800" left="100px" top="100px"style="border 1px solid black"></canvas>
            this.key = parseInt(key); 
            this.right = null; 
            this.left = null; 
            this.parent = null;
            this.height = 1; 
            this.leftLocation = 350;
            this.topLocation = 0; 
            this.hasLeft = function(){
                if(this.left != null)
                    return true; 
                else return false; 
            }
            this.hasRight = function(){
                if(this.right != null)
                    return true; 
                else return false; 
            }
            this.getLeft = function(){
                return this.left;
            }
            this.getRight = function(){
                return this.right; 
            }
            this.setParent = function(n){
                this.parent = n; 
            }
            this.getParent = function(){
                return this.parent; 
            }
        }
        function BST(){
            this.nodeList = [];
            this.root = null; 
            this.rootTop = 50;
            this.levels = new Array(10); 
            this.numKeys = 0; 
            this.repositionRight = false; 
            this.repositionLeft = false; 
            this.i = 0; 
            this.j = 0; 
            this.rightOfRightChild = 0; 
            this.leftOfLeftChild = 0; 
            this.rightOfLeftChild = 0; 
            this.leftOfRightChild = 0; 
            this.rootLocation = 350; 
            this.rootLeftLocation = 250; 
            this.rootRightLocation = 450; 
            this.smallestKey = null;
            this.largestKey = null;
            this.getInOrderTraversal = function(){}
            this.inOrderHelper = function(n){}
            this.getPreOrderTraversal = function(){}
            this.preOrderHelper = function(n){}
            this.getPostOrderTraversal = function(){}
            this.postOrderHelper = function(n){}
            this.getLevelOrderTraversal = function(){}
            this.levelOrderHelper = function(n){}
            this.getDepth = function(n){
                return this.getDepthHelper(this.root, n.key); 
            }
            this.getDepthHelper = function(n, k){
                if(n.key < k) return 1+this.getDepthHelper(n.right, k); 
                else if(n.key > k) return 1+this.getDepthHelper(n.left, k); 
                else return 0; 
            }
            this.getHeight = function(){
                return getHeight(this.root); 
            }
            this.getHeight = function(n){
                if(n == null) return 0; 
                return 1+Math.max(this.getHeight(n.left), this.getHeight(n.right)); 
            }
            this.insert = function(key){
                if(this.root == null) {
                    this.smallestKey = parseInt(key);
                    this.largestKey = parseInt(key); 
                }
                else if(parseInt(key) > parseInt(this.largestKey)) {
                    this.largestKey = key;
                }
                else if(parseInt(key) < parseInt(this.smallestKey)) {
                    this.smallestKey = key;
                }
                this.root = this.insertHelper(key, this.root);
                this.numKeys++; 
            }
            this.insertHelper = function(key, n){
                if(n == null) {
                    var newNode = new BSTNode(key); 
                    this.nodeList.push(newNode);
                    return newNode;
                }
                if(key < n.key) {
                    n.left = this.insertHelper(key, n.left);
                    n.left.setParent(n);
                } else {
                    n.right = this.insertHelper(key, n.right);
                    n.right.setParent(n);
                }
                return n; 
            }
            this.remove = function(key){
                this.root = removeHelper(key, this.root); 
                this.numKeys--; 
            }
            removeHelper = function(key, n){
                if(key < n.key) n.left = removeHelper(key, n.left); 
                else if(key > n.key) n.right = removeHelper(key, n.right); 
                else {
                    if(n.right == null) return n.left; 
                    else if(n.left == null) return n.right; 
                    else{
                        n.key = this.getInOrderPredecessor(n.left); 
                        n.left = removeHelper(n.key, n.left); 
                    }
                }
                return n; 
            }
            this.getInOrderPredecessor = function(n){
                while(n.right != null)
                    n = n.right; 
                return n.key; 
            }
            this.contains = function(key){
                return contains(this.root, key); 
            }
            contains = function(n, key){
                if(n == null) return false; 
                if(n.key < key) {return contains(n.right, key); }
                else if(n.key > key) {return contains(n.left, key); }
                else {return true; }
            }
        }
        let nodeNum = 0; 
        let userTree = null;
        function createTree(){
            userTree = new BST();
        }
        function insertNode(){
            let divBorder = document.createElement("Div"); 
            let newDiv = document.createElement("Div"); 
            let x = document.getElementById("userInput").value;
            userTree.insert(x); 
            var currentNode = null; 
            for(var i = 0; i < userTree.nodeList.length; i++){
                if(userTree.nodeList[i].key == x) {
                    currentNode = userTree.nodeList[i]; 
                    break;
                }
            }
            var currentParent = currentNode.parent;
            document.body.appendChild(newDiv); 
            $(newDiv).attr({
                'id': 'Node'+nodeNum
            }); 
            if(currentParent != null){
                currentParent.key>currentNode.key ? 
                    (currentNode.leftLocation = currentParent.leftLocation-50) : (currentNode.leftLocation = currentParent.leftLocation+50)
            }
            currentNode.topLocation = userTree.getDepth(currentNode)*50+userTree.rootTop+25;
            $(newDiv).css({
                'color': 'black',
                'position': 'absolute', 
                'left': currentNode.leftLocation+'px',
                'top': currentNode.topLocation+'px',
                'height': '20px', 
                'width': '30px',  
                'border': '1px solid green', 
                'border-radius':'50%', 
                'text-align':'center', 
            });
            if(currentParent != null){
                dist = Math.sqrt(Math.pow((currentNode.leftLocation - currentParent.leftLocation), 2) + Math.pow((currentNode.topLocation - currentParent.topLocation), 2)); 
                xMid = (currentNode.leftLocation + currentParent.leftLocation+30)/2; 
                yMid = (currentNode.topLocation + currentParent.topLocation+20)/2; 
                slopeInRad = Math.atan2(currentNode.topLocation-currentParent.topLocation, currentNode.leftLocation - currentParent.leftLocation); 
                slopeInDegrees = (slopeInRad*180)/Math.PI; 
                let line = document.createElement("Div");
                line.style.transform = "rotate("+slopeInDegrees+"deg)"; 
                document.body.appendChild(line);
                $(line).css({
                    'color': 'black', 
                    'width': (dist-30)+'px',
                    'top': yMid+'px',
                    'left': (xMid - ((dist-30)/2))+'px',
                    'position': 'absolute', 
                    'border': '1px solid black'
                });
                 
            }
            
            $(newDiv).append(x); 
            $(this.root).append(this.leftBorder); 
            $(this.root).append(this.rightBorder);
        }
    </script>
    </body>
</html>
